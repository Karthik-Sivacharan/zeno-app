---
description: Complete guide for SVG illustrations in Zeno. Covers the full workflow: receiving SVG → recoloring → splitting into layers → animating. Use this for all illustration work.
globs:
  - "**/*.svg"
  - "**/SVGs/**"
  - "**/Onboarding/**"
---

# Zeno SVG Illustrations

> Complete guide for processing, styling, layering, and animating SVG illustrations.

---

## Workflow Overview

When the user provides a single SVG illustration:

1. **Recolor** — Apply Zeno color palette (replace all colors per mapping table)
2. **Clean** — Remove backgrounds, fix viewBox, remove fixed dimensions
3. **Split** — Separate into semantic layers for independent animation
4. **Animate** — Apply per-layer animations in SwiftUI

```
User provides SVG
       ↓
┌──────────────────┐
│  1. RECOLOR      │  Apply color mapping table
└──────────────────┘
       ↓
┌──────────────────┐
│  2. CLEAN        │  Remove backgrounds, fix viewBox
└──────────────────┘
       ↓
┌──────────────────┐
│  3. SPLIT        │  Create layer files (rays, figure, etc.)
└──────────────────┘
       ↓
┌──────────────────┐
│  4. ANIMATE      │  Apply SwiftUI animations per layer
└──────────────────┘
```

---

# PART 1: Color System

## Color Mapping Table

| Role | Hex Code | Token | Usage |
|------|----------|-------|-------|
| **Background** | `transparent` | — | Remove solid backgrounds |
| **Primary Body** | `#B4913E` | `Brass._400` | Main figure/character, golden elements |
| **Skin/Flesh** | `#D8BF9B` | `Sand._300` | Face, exposed skin, light warm surfaces |
| **Accent Warm** | `#D18C82` | `Clay._400` | Clouds, soft decorative elements |
| **Accent Earth** | `#965846` | `Clay._500` | Palm trees, foliage, organic shapes |
| **Outline/Structure** | `#4A2219` | `Clay._800` | Outlines, patterns, structural lines |
| **Energy/Neon** | `#CCFF00` | `Acid._400` | Rays, glows, highlights, energy |
| **Floor/Ground** | `#B4913E` | `Brass._400` | Pathways, floors, grounded surfaces |

## Color Replacement Rules

### DELETE (Background Rectangles)
```
Any large rectangle filling the viewBox → DELETE the <path> entirely
```

### Replace Black/Dark Colors → Clay._800
```
#000000 → #4A2219
#0A0F0D → #4A2219
#1A1A1A → #4A2219
#020101 → #4A2219
rgb(2,1,1) → #4A2219
```

### Replace Cool Greys/Blues → Clay Tones
```
#5D8691 (Silt/Teal) → #965846 (Clay._500) for organic elements
#8A918D (Moss Grey) → #D18C82 (Clay._400) for soft/cloud elements
rgb(136,216,250) → #D18C82 (Clay._400) for cloud-like shapes
rgb(5,51,242) → #965846 (Clay._500) for structural elements
```

### Keep As-Is
```
#CCFF00 (Acid Green) — energy/highlights
#B4913E (Brass Gold) — body/golden elements
#D8BF9B (Sand) — skin tones only (not backgrounds)
```

---

# PART 2: Cleaning & Preparation

## Checklist Before Splitting

- [ ] Remove solid background rectangle (usually first `<path>`)
- [ ] Replace all colors per mapping table above
- [ ] Ensure `viewBox` is present (e.g., `viewBox="0 0 1536 2048"`)
- [ ] Remove fixed `width` and `height` attributes from `<svg>`
- [ ] Test render on dark background (`#141C18`) for contrast

---

# PART 3: Layer Splitting

## Why Split?

Splitting allows independent animations per element:
- Rays can rotate/pulse
- Figure can breathe/float
- Clouds can drift
- Palms can sway

## Layer Names & Files

For an illustration named `zen-svg-1`, create these files:

| Layer | Filename | Content |
|-------|----------|---------|
| Rays/Energy | `zen-svg-1-rays.svg` | Sun rays, energy bursts |
| Halo/Glow | `zen-svg-1-halo.svg` | Glow rings, halos |
| Clouds | `zen-svg-1-clouds.svg` | Cloud shapes, soft accents |
| Palms/Foliage | `zen-svg-1-palms.svg` | Trees, plants, organic sides |
| Patterns | `zen-svg-1-patterns.svg` | Decorative lines, patterns |
| Ground | `zen-svg-1-ground.svg` | Floor, base, ground plane |
| Figure | `zen-svg-1-figure.svg` | Main character/body |
| **Full (fallback)** | `zen-svg-1.svg` | Complete combined illustration |

## Folder Structure

```
Zeno/Resources/SVGs/
├── zen-svg-1.svg              ← Full fallback
└── zen-svg-1/
    ├── zen-svg-1-rays.svg
    ├── zen-svg-1-halo.svg
    ├── zen-svg-1-clouds.svg
    ├── zen-svg-1-palms.svg
    ├── zen-svg-1-patterns.svg
    ├── zen-svg-1-ground.svg
    └── zen-svg-1-figure.svg
```

## How to Split

1. Open the cleaned/recolored SVG
2. Identify paths by their visual role (rays, clouds, figure, etc.)
3. For each layer:
   - Create a new file with same `<?xml>` header and `<svg>` tag
   - Copy only the relevant `<path>` elements
   - Keep the **same viewBox** across all layer files
4. Save the original combined file as fallback

---

# PART 4: Animation

## Animation Strategy by Layer

| Layer | Animation | Duration | Effect |
|-------|-----------|----------|--------|
| **Rays** | Slow rotation OR pulse scale | 8-12s | Radiant energy |
| **Halo** | Breathing scale | 4s | Gentle pulse |
| **Clouds** | Horizontal drift | 20s | Lazy movement |
| **Palms** | Slight rotation sway | 6s | Organic sway |
| **Patterns** | Shimmer/opacity | 3s | Subtle sparkle |
| **Ground** | None (stable) | — | Anchors scene |
| **Figure** | Breathing + float | 4-5s | Alive feeling |

## SwiftUI Animation Config

```swift
enum IllustrationAnimation {
    // Breathing (scale pulse)
    static let breatheScale: CGFloat = 1.015
    static let breatheDuration: Double = 4.0
    
    // Floating (vertical bob)
    static let floatOffset: CGFloat = 6
    static let floatDuration: Double = 5.0
    
    // Glow pulse (behind illustration)
    static let glowMin: Double = 0.2
    static let glowMax: Double = 0.5
    static let glowDuration: Double = 3.0
    static let glowRadius: CGFloat = 40
    
    // Rays rotation
    static let rayRotationDuration: Double = 12.0
    
    // Cloud drift
    static let cloudDriftOffset: CGFloat = 20
    static let cloudDriftDuration: Double = 20.0
}
```

## Ambient Animation (Full Illustration Fallback)

When layers aren't available, apply to the whole SVG:

```swift
SVGView(contentsOf: url)
    .scaleEffect(isBreathing ? 1.015 : 1.0)
    .offset(y: isFloating ? -6 : 6)
    .animation(.easeInOut(duration: 4.0).repeatForever(autoreverses: true), value: isBreathing)
    .animation(.easeInOut(duration: 5.0).repeatForever(autoreverses: true), value: isFloating)
```

---

# PART 5: SwiftUI Integration

## Basic Usage

```swift
import SVGView

SVGView(contentsOf: Bundle.main.url(forResource: "zen-svg-1", withExtension: "svg")!)
    .aspectRatio(contentMode: .fit)
    .frame(maxWidth: .infinity)
    .frame(height: UIScreen.main.bounds.height * 0.42)
```

## With Animation Wrapper

```swift
AnimatedIllustration(name: "zen-svg-1")
    .frame(height: UIScreen.main.bounds.height * 0.42)
```

## Sizing Guidelines

- **Onboarding screens**: 40-45% of screen height
- **Marketing/splash**: 50-60% of screen height
- Always use `aspectRatio(contentMode: .fit)`
- Use `maxWidth: .infinity` for responsive width

---

# Quick Reference

## Token → Hex Lookup

| Token | Hex | Use For |
|-------|-----|---------|
| `Brass._400` | `#B4913E` | Body, gold, ground |
| `Sand._300` | `#D8BF9B` | Skin, warm light |
| `Clay._400` | `#D18C82` | Clouds, soft accent |
| `Clay._500` | `#965846` | Palms, earth, organic |
| `Clay._800` | `#4A2219` | Outlines, dark structure |
| `Acid._400` | `#CCFF00` | Energy, neon, rays |

## Common Color Swaps

```
rgb(254,254,254) → DELETE (background)
rgb(2,1,1) → #4A2219
rgb(230,56,37) → #CCFF00 (energy) or #B4913E (body)
rgb(5,51,242) → #965846
rgb(136,216,250) → #D18C82
rgb(241,167,67) → #B4913E
```
