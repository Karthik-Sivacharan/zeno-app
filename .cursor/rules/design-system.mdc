---
alwaysApply: true
---
# Zeno Design System Rules

## 1. Core Principle: Token-First Design
- **NEVER** hardcode values for colors, fonts, spacing, radius, or shadows.
- **ALWAYS** use the design system tokens.
- **HIERARCHY**: Prefer **Semantic Tokens** (`ZenoSemanticTokens`) over **Primitive Tokens** (`ZenoTokens`).

## 2. Token Usage Guide

### ðŸŽ¨ Colors
**Goal**: Use semantic names that describe *usage*, not appearance.

- **Primary Source**: `ZenoSemanticTokens.Theme`
  - `background`, `foreground` (Page basics)
  - `card`, `cardForeground` (Surfaces)
  - `primary`, `primaryForeground` (Main actions)
  - `destructive`, `destructiveForeground` (Errors/Delete)
  - `muted`, `mutedForeground` (Subtle text/bgs)
  - `accent`, `accentForeground` (Interactive states)
  
- **Fallback Source** (Only if no semantic token fits): `ZenoTokens.ColorBase`
  - `Olive`, `Sand`, `Brass`, `Acid`, `Clay`, `Ember`, `Silt`, `Moss`, `Stone`.

**Example:**
```swift
// âœ… Good
.background(ZenoSemanticTokens.Theme.background)
.foregroundColor(ZenoSemanticTokens.Theme.primary)

// âŒ Avoid (unless creating a new semantic token)
.background(ZenoTokens.ColorBase.Olive._900)
```

### ðŸ”  Typography
**Source**: `ZenoTokens.Typography` (Primitives)

- **Display**: `displayLarge`, `displayMedium`, `displaySmall`, `displayXSmall` (Syne ExtraBold)
- **Title**: `titleLarge` ... `titleXXSmall` (Space Grotesk Regular)
- **Body**: `bodyLarge` ... `bodyXSmall` (Space Grotesk Regular)
- **Label**: `labelLarge` ... `labelXSmall` (Space Grotesk Regular)
- **Mono**: `monoLarge` ... `monoSmall` (Space Mono Medium)

**Example:**
```swift
Text("Zeno").font(ZenoTokens.Typography.displayLarge)
```

### ðŸ“ Spacing & Layout
**Source**: `ZenoSemanticTokens.Space`

- Values: `xs`, `sm`, `md`, `lg`, `xl`, `xxl`
- Use for `VStack`/`HStack` spacing and `.padding()`.

**Example:**
```swift
VStack(spacing: ZenoSemanticTokens.Space.md) { ... }
    .padding(ZenoSemanticTokens.Space.lg)
```

### ðŸŸ¡ Radius (Corner Rounding)
**Source**: `ZenoSemanticTokens.Radius`

- Values: `none`, `sm`, `md`, `lg`, `xl`, `pill`

### ðŸŒ‘ Shadows & Effects
**Source**: `ZenoSemanticTokens.Shadow` / `ZenoSemanticTokens.Blur`

- **Shadows**: `none`, `card`, `elevated`, `overlay`
- **Blur**: `backgroundSoft`, `backgroundStrong`, `overlay`

### âš¡ï¸ Motion
**Source**: `ZenoSemanticTokens.Motion`

- **Durations**: `snap` (0.15s), `fast` (0.3s), `medium` (0.5s), `slow` (0.8s)
- **Curves**: `mechanical`, `liquid`, `standard`

## 3. Component Construction
- Do not create component-specific tokens (e.g., `ButtonPrimary.background`) outside of the component.
- Map component states directly to `ZenoSemanticTokens` or `ZenoTokens` inside the view.
- **Gradients**: Use `ZenoSemanticTokens.Gradients` (e.g., `swampBody`, `acidFlow`) for rich backgrounds.

## 4. Apple Native Elements (Glass, Materials, Vibrancy)

For system-level visual effects, **use Apple's native APIs directly** â€” do NOT wrap them in custom tokens.

### ðŸªŸ Glass / Frosted Effects
**Source**: SwiftUI `Material` (iOS 15+)

Use Apple's built-in materials for glass/vibrancy effects. These adapt automatically to light/dark mode, accessibility settings, and underlying content.

**Available Materials** (thinnest to thickest):
- `.ultraThinMaterial` â€” Most transparent, heavy blur
- `.thinMaterial` â€” Light frost
- `.regularMaterial` â€” Balanced (most common)
- `.thickMaterial` â€” More opaque
- `.ultraThickMaterial` â€” Nearly solid

**Example:**
```swift
// âœ… Good: Use Apple's material directly
.background(.ultraThinMaterial, in: Capsule())
.background(.regularMaterial)

// âŒ Avoid: Don't wrap in custom tokens
.background(ZenoSemanticTokens.Glass.thin)  // Don't create this
```

**When to layer with Zeno colors:**
You can overlay a semi-transparent Zeno color on top of a material for brand tinting:
```swift
.background(.ultraThinMaterial)
.background(ZenoSemanticTokens.Theme.background.opacity(0.7))
```

### ðŸ“± Other Native Elements
Use Apple's native components directly when available:
- **SF Symbols**: Use system icons via `Image(systemName:)`
- **Haptics**: Use `UIImpactFeedbackGenerator` directly
- **System Colors**: Prefer Zeno tokens, but `Color.clear` and `Color.primary` are acceptable for system integration

## 5. Refactoring Check
If you see:
- `Color(.red)` -> Change to `ZenoSemanticTokens.Theme.destructive` or `ZenoTokens.ColorBase.Clay._500`.
- `.padding(16)` -> Change to `.padding(ZenoSemanticTokens.Space.md)`.
- `Font.system(size: 20)` -> Change to `ZenoTokens.Typography.titleXSmall`.
- Manual blur + opacity for glass -> Change to `.background(.ultraThinMaterial)`.
